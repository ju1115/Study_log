---
title: "브라우저_저장소_4대장_정리"
date: "2025-11-27"
category: "Language & Framework"
tags: [FrontEnd, Browser, Storage, Cookie]
description: "브라우저의 비휘발성 저장소(LocalStorage, SessionStorage, Cookie, IndexedDB)의 차이점과 현업 활용 기준."
---

# 🛠️ `브라우저_저장소`

## 🎯 Goal (목표)

브라우저의 메모리(RAM)는 새로고침 시 데이터가 초기화되므로, 데이터를 영구적 혹은 특정 기간 동안 보존하기 위해 브라우저가 제공하는 4가지 비휘발성 저장소(Disk)의 특징을 이해하고 상황에 맞는 적절한 저장소를 선택한다.

## 💻 Implementation (구현 과정)

### Step 1. Concept Summary (저장소 비교)

| 구분                | 수명 (Life Cycle)              | 용량       | 서버 전송          | 용도                               |
| :------------------ | :----------------------------- | :--------- | :----------------- | :--------------------------------- |
| **Local Storage**   | 영구 보관 (직접 지우기 전까지) | ~5MB       | X                  | UI 설정(테마), 비회원 장바구니     |
| **Session Storage** | 탭 닫으면 즉시 삭제            | ~5MB       | X                  | 임시 폼 데이터, 1회성 데이터       |
| **Cookie**          | 만료 기한 설정 가능            | 4KB        | **O (매 요청 시)** | **인증 토큰(JWT)**, 다시 보지 않기 |
| **IndexedDB**       | 영구 보관                      | **대용량** | X                  | 이미지 캐싱, 오프라인 데이터       |

### Step 2. Code Snippet

#### 1. Vanilla JS (기본 사용법)

```javascript
// [Local & Session Storage] - API가 동일함
// 데이터 저장 (문자열만 가능하므로 객체는 JSON 변환 필수)
localStorage.setItem("theme", "dark");
localStorage.setItem("user", JSON.stringify({ id: 1, name: "Dev" }));

// 데이터 조회
const theme = localStorage.getItem("theme");
const user = JSON.parse(localStorage.getItem("user"));

// [Cookie] - 다루기 까다로워 보통 라이브러리 사용
document.cookie = "token=xyz123; max-age=3600; path=/;";
```

#### 2. React + Zustand (Persist Middleware 사용)

```javascript
import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";

export const useStore = create(
  persist(
    (set) => ({
      theme: "light",
      toggleTheme: () =>
        set((state) => ({
          theme: state.theme === "light" ? "dark" : "light",
        })),
    }),
    {
      name: "app-settings", // LocalStorage에 저장될 Key 이름
      storage: createJSONStorage(() => localStorage), // (기본값) Session으로 변경 가능
    }
  )
);
```

## 💡 Best Practices

### 현업에서는 주로 이렇게 사용함:

- **보안(Security):** `AccessToken`이나 비밀번호 같은 민감 정보는 **절대 LocalStorage에 저장하지 않음** (XSS 공격에 취약). 주로 `HttpOnly Cookie`에 담아 서버와 통신함.
- **상태 유지:** '다크 모드', '최근 본 상품', '팝업 일주일간 보지 않기' 등은 LocalStorage/Cookie를 적극 활용함.
- **임시 저장:** 사용자가 긴 글을 쓰다가 날아가는 것을 방지하기 위해 `onChange`마다 SessionStorage에 내용을 백업함.

### 주의할 점 (Gotchas):

- **동기(Synchronous) 처리:** LocalStorage와 SessionStorage는 **동기적**으로 작동함. 용량이 큰 데이터를 넣고 빼면 메인 스레드(UI)가 멈칫(Blocking)할 수 있음.
- **문자열 제한:** Storage는 오직 **String**만 저장 가능함. `JSON.stringify()` / `JSON.parse()` 과정에서 발생하는 에러(`try-catch`) 처리를 반드시 해줘야 함.
- **용량 초과:** 5MB를 넘어가면 `QuotaExceededError`가 발생하므로, 대용량 데이터는 **IndexedDB**를 사용해야 함.
